<!DOCTYPE html><html>
  <head>
    <meta name="darkreader-lock" content="true">
    <meta http-equiv="Content-Type" content="charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/assets/js/header.js"></script>
    <script src="/assets/katex/katex.js"></script>
<script defer src="/assets/katex/auto-render.min.js" onload="renderMathInElement(document.body);"></script>    <script>document.addEventListener(&quot;DOMContentLoaded&quot;, function() {
    renderMathInElement(document.body, {
      delimiters: [
          {left: '$$', right: '$$', display: false},
      ],
      throwOnError : false
    });
});</script>
    <link rel="stylesheet" href="/assets/katex/katex.css">
    <link rel="stylesheet" href="/assets/css/reset.css">
    <link rel="stylesheet" href="/assets/css/root.css">
    <link rel="stylesheet" href="/assets/css/color_scheme_v2.dark_mode.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;600;700&amp;display=swap" rel="stylesheet">
    <script src="/assets/js/highlightjs/highlight.js"></script>
    <link rel="stylesheet" href="/assets/css/layout.css">
    <link rel="stylesheet" href="/assets/css/page_content.css">
    <link rel="stylesheet" href="/assets/css/post.css">
    <link rel="stylesheet" href="/assets/css/color_scheme_v2.dark_mode.css">
    <link rel="stylesheet" href="/assets/css/highlightjs/github-dark.css">
    <title>ğŸ‘ï¸â€ğŸ—¨ï¸ Bevy å¼•æ“æ¸²æŸ“æ¶æ„è®¾è®¡æ¦‚è§ˆ</title>
  </head>
  <body>
    <script>hljs.highlightAll();</script>
    <div class="post">
      <div class="catalogue">
        <div>
          <ul>
            <li class="h1"><a href="#heading1_0">
                <t class="">å‰è¨€</t>
              </a></li>
            <li class="h1"><a href="#heading1_1">
                <t class="">æ¸²æŸ“ App ä¸ä¸–ç•Œ</t>
              </a></li>
            <li class="h1"><a href="#heading1_2">
                <t class="">æ¸²æŸ“é›†åˆ</t>
              </a></li>
            <li class="h1"><a href="#heading1_3">
                <t class="">ç®¡ç†æ¸²æŸ“æµç¨‹çš„æ•°æ®ç»“æ„</t>
              </a></li>
            <li class="h3"><a href="#heading3_0">
                <t class="">View</t>
              </a></li>
            <li class="h3"><a href="#heading3_1">
                <t class="">ViewNode</t>
              </a></li>
            <li class="h3"><a href="#heading3_2">
                <t class="">ViewNode çš„å®ç°æ¡ˆä¾‹</t>
              </a></li>
            <li class="h1"><a href="#heading1_4">
                <t class="">æ¸²æŸ“é˜¶æ®µ</t>
              </a></li>
            <li class="h2"><a href="#heading2_3">
                <t class="">Draw traitã€DrawFunctions</t>
              </a></li>
            <li class="h2"><a href="#heading2_3">
                <t class="">RenderCommand trait</t>
              </a></li>
            <li class="h2"><a href="#heading2_3">
                <t class="">å¦‚ä½•æ¸²æŸ“ä¸€ä¸ªæ¸²æŸ“é˜¶æ®µ</t>
              </a></li>
            <li class="h2"><a href="#heading2_3">
                <t class="">å…¶å®ƒçš„æ¸²æŸ“é˜¶æ®µç»“æ„ä½“</t>
              </a></li>
            <li class="h1"><a href="#heading1_5">
                <t class="">ä½¿ç”¨ bevy_render</t>
              </a></li>
            <li class="h1"><a href="#heading1_6">
                <t class="">å‚è€ƒé˜…è¯»</t>
              </a></li>
            <li class="h2"><a href="#heading2_3">
                <t class="">Extract</t>
              </a></li>
          </ul>
        </div>
      </div>
      <div class="navi"><a class="navi_link" href="/home.html">ä¸»é¡µ</a><a class="navi_link" href="/blogs.html">åšå®¢</a><a class="navi_link" href="/portfolio.html">é¡¹ç›®</a><a class="navi_link" href="/about.html">å…³äº</a></div>
      <div class="sidebar_wrapper_left sidebar_wrapper"></div>
      <div class="sidebar_wrapper_right sidebar_wrapper"></div>
      <div class="contents">
        <div class="header"><a class="navi_link" href="/home.html">ä¸»é¡µ</a><a class="navi_link" href="/blogs.html">åšå®¢</a><a class="navi_link" href="/portfolio.html">é¡¹ç›®</a><a class="navi_link" href="/about.html">å…³äº</a></div>
        <div class="page_description">
          <h1 class="title">ğŸ‘ï¸â€ğŸ—¨ï¸ Bevy å¼•æ“æ¸²æŸ“æ¶æ„è®¾è®¡æ¦‚è§ˆ</h1>
          <div class="sub_info">
            <p class="date">2025-06-05</p>
            <div class="type_tags">
              <p class="tag">Rust</p>
              <p class="tag">Bevy</p>
              <p class="tag">Game Dev</p>
              <p class="type">Dev</p>
            </div>
          </div>
        </div>
        <div class="page_content">
          <h1 id="heading1_0">
            <t class="">å‰è¨€</t>
          </h1>
          <p>
            <t class="">æœ¬æ–‡ä¼šç”¨ </t>
            <t class="code">#</t>
            <t class=""> ç¬¦å·ä»£è¡¨å‡½æ•°åï¼Œå¦‚ </t>
            <t class="code">#foo</t>
            <t class="">ï¼›ç”¨ </t>
            <t class="code">A#foo</t>
            <t class="">ä»£è¡¨ </t>
            <t class="code">A</t>
            <t class=""> ç±»å‹çš„å‡½æ•°</t>
            <t class="code">foo</t>
            <t class=""> ã€‚Bevy ä¸ºå›¾å½¢ API åšäº†å°è£…ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°å’Œ wgpu ä¸€ä¸€å¯¹åº”çš„ APIï¼Œåœ¨æœ¬æ–‡ä¸å¤šä»‹ç»è¿™ä¸€éƒ¨åˆ†ã€‚</t>
          </p>
          <h1 id="heading1_1">
            <t class="">æ¸²æŸ“ App ä¸ä¸–ç•Œ</t>
          </h1>
          <p>
            <t class="">Bevy ä¸­çš„æ¸²æŸ“å‘ç”Ÿåœ¨æ¸²æŸ“ </t>
            <t class="code">App</t>
            <t class="">ï¼Œå…¶æ˜¯æˆ‘ä»¬åˆ›å»ºçš„ </t>
            <t class="code">App</t>
            <t class=""> çš„ </t>
            <t class="code">SubApp</t>
            <t class="">ï¼ˆå­ Appï¼‰ï¼Œä¸¤è€…å¯ä»¥åœ¨ä¸åŒçš„çº¿ç¨‹è¿è¡Œã€‚</t>
          </p>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">fn build(&amp;self, app: &amp;mut App) {
  ...
  let render_app = match app.get_sub_app_mut(RenderApp) {
    Ok(render_app) =&gt; render_app,
    Err(_) =&gt; return,
  };
}</code></pre>
            </div>
            <div class="caption">
              <t class="">è·å–æ¸²æŸ“ app</t>
            </div>
          </div>
          <h1 id="heading1_2">
            <t class="">æ¸²æŸ“é›†åˆ</t>
          </h1>
          <p>
            <t class="">åœ¨ Bevy ä¸­ï¼Œæ¸²æŸ“ç›¸å…³çš„ System åœ¨ </t>
            <t class="code">Render</t>
            <t class=""> Schedule æ‰§è¡Œã€‚åŒæ—¶ï¼Œæ¸²æŸ“çš„å‡†å¤‡å·¥ä½œå’Œæ¸²æŸ“æ‰§è¡Œå·¥ä½œæ˜¯æŒ‰é¡ºåºè¿›è¡Œçš„ï¼ŒBevy æä¾›äº† </t>
            <t class="code">RenderSet</t>
            <t class=""> ä½œä¸ºæ ‡è®°ã€‚è¢«æ ‡è®°äº† </t>
            <t class="code">RenderSet</t>
            <t class=""> çš„ System æ¯å¸§æŒ‰ </t>
            <t class="code">RenderSet</t>
            <t class=""> æšä¸¾ä¸­çš„é¡ºåºè¿›è¡Œæ‰§è¡Œï¼š</t>
          </p>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">pub enum RenderSet {
    ExtractCommands,
    PrepareAssets,
    ManageViews,
    Queue,
    QueueMeshes,
    PhaseSort,
    Prepare,
    PrepareResources,
    PrepareResourcesFlush,
    PrepareBindGroups,
    Render, //!!
    Cleanup,
    PostCleanup,
}</code></pre>
            </div>
            <div class="caption">
              <t class="">å¦‚æœæ„Ÿåˆ°å›°æƒ‘ï¼Œå¯ä»¥å…ˆä¸ç”¨åœ¨æ„é‡Œé¢çš„å†…å®¹ã€‚åªè¦ç†è§£æ¸²æŸ“ system åˆ†æŸäº›é˜¶æ®µé¡ºåºæ‰§è¡Œå³å¯ã€‚</t>
            </div>
          </div>
          <p>
            <t class="">åœ¨å®ç°ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ </t>
            <t class="code">in_set</t>
            <t class=""> ä¸ºä¸€ä¸ª System æŒ‡å®šä¸€ä¸ª </t>
            <t class="code">RenderSet</t>
          </p>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">render_app.add_systems(Render, custom_system.in_set(RenderSet::Queue));</code></pre>
            </div>
            <div class="caption"></div>
          </div>
          <h1 id="heading1_3">
            <t class="">ç®¡ç†æ¸²æŸ“æµç¨‹çš„æ•°æ®ç»“æ„</t>
          </h1>
          <p>
            <t class="">åœ¨æˆ‘ä»¬æ¸²æŸ“ä¸€å¸§çš„è¿‡ç¨‹ä¸­ï¼Œä¼šç”¨åˆ°å¾ˆå¤š Passã€‚ä¸åŒçš„ Pass æ‰§è¡Œçš„å…ˆåé¡ºåºä¸åŒã€‚åŒæ—¶ï¼Œå…¶å®ƒç¨‹åºå¯èƒ½è¦ä¸ºå·²ç»å†™å¥½çš„åº“çš„ Pass ä¹‹é—´æ’å…¥æ–°çš„ Passã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›æˆ‘ä»¬åœ¨å†™æ¸²æŸ“è¡Œä¸ºçš„æ—¶å€™èƒ½ä¸“æ³¨åˆ†ç¦»ã€‚ä¾‹å¦‚ï¼Œåœ¨ Shadow çš„ PrePass çš„æ—¶å€™ä¸éœ€è¦è€ƒè™‘ä¸» Pass æ€ä¹ˆå†™ã€‚ç»¼åˆä»¥ä¸Šéœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³è±¡ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªèƒ½å¤Ÿå­˜å‚¨å„ä¸ªæ¸²æŸ“è¡Œä¸ºï¼ŒåŒæ—¶èƒ½å¤Ÿç®¡ç†å’Œè°ƒæ•´æ¸²æŸ“è¡Œä¸ºå…ˆåé¡ºåºçš„æ•°æ®ç»“æ„ã€‚åœ¨ Bevy ä¸­ï¼Œè¿™ä¸ªæ•°æ®ç»“æ„æ˜¯ä¸€ä¸ªæœ‰å‘å›¾ï¼Œè¢«ç§°ä¸º </t>
            <t class="code">RenderGraph (struct)</t>
            <t class="">ï¼Œä¸‹æ–‡ç§°æ¸²æŸ“å›¾ã€‚æ¸²æŸ“å›¾çš„æ¯ä¸ªèŠ‚ç‚¹è¢«ç›´æ¥ç§°ä¸º </t>
            <t class="code">Node (trait)</t>
            <t class="">ï¼Œå®ƒè´Ÿè´£æ‰§è¡Œæ¸²æŸ“è¡Œä¸ºã€‚å£°æ˜èŠ‚ç‚¹ä¹‹é—´é¡ºåºçš„ç»“æ„æ˜¯ </t>
            <t class="code">Edge</t>
            <t class="">ã€‚æ­¤å¤–ï¼Œæ¸²æŸ“å›¾è¿˜ä¸ºæˆ‘ä»¬æä¾›äº†å­˜å‚¨æŸäº›æ¸²æŸ“ç›¸å…³æ•°æ®çš„èƒ½åŠ›ï¼Œå…¶ä¸º </t>
            <t class="code">Slot</t>
            <t class="">ã€‚å®ƒå¯ä»¥å­˜å‚¨ Buffer, TextureView, Sampler, Entity ç­‰ã€‚</t>
          </p>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">pub trait Node:
    Downcast
    + Send
    + Sync
    + 'static {
    // Required method
    fn run&lt;'w&gt;(
        &amp;self,
        graph: &amp;mut RenderGraphContext&lt;'_&gt;,
        render_context: &amp;mut RenderContext&lt;'w&gt;,
        world: &amp;'w World,
    ) -&gt; Result&lt;(), NodeRunError&gt;;

    // Provided methods
    fn input(&amp;self) -&gt; Vec&lt;SlotInfo&gt; { ... }
    fn output(&amp;self) -&gt; Vec&lt;SlotInfo&gt; { ... }
    fn update(&amp;mut self, _world: &amp;mut World) { ... }
}</code></pre>
            </div>
            <div class="caption"><a class="link" href="https://github.com/bevyengine/bevy/blob/c818c92143e56ef3b51836af423319a5a61b15ad/crates/bevy_render/src/render_graph/node.rs#L354">https://github.com/bevyengine/bevy/blob/c818c92143e56ef3b51836af423319a5a61b15ad/crates/bevy_render/src/render_graph/node.rs#L354</a></div>
          </div>
          <p>
            <t class="code">Node</t>
            <t class=""> trait ä¸­çš„ </t>
            <t class="code">#run</t>
            <t class=""> å‡½æ•°æ˜¯å‘ç”Ÿæ‰§è¡Œæ¸²æŸ“å‘½ä»¤çš„å‡½æ•°ï¼Œä¾‹å¦‚åˆ›å»º </t>
            <t class="code">RenderPass</t>
            <t class="">ã€æ‰§è¡Œ </t>
            <t class="code">draw</t>
            <t class=""> å‘½ä»¤ç­‰ã€‚è€Œ</t>
            <t class="code">input</t>
            <t class=""> å’Œ </t>
            <t class="code">output</t>
            <t class=""> å®šä¹‰äº† </t>
            <t class="code">#run</t>
            <t class=""> æ—¶éœ€è¦ç”¨åˆ°çš„è¾“å…¥å’Œè¾“å‡ºå†…å®¹çš„ä¿¡æ¯ï¼Œå¯ä»¥åœ¨ </t>
            <t class="code">#run</t>
            <t class=""> æ—¶ä» </t>
            <t class="code">RenderGraphContext</t>
            <t class=""> ä¸­è®¿é—®ã€‚è¿™ä¸¤ä¸ªå‡½æ•°çš„é»˜è®¤å®ç°åªè¿”å›ä¸€ä¸ªç©ºçš„ </t>
            <t class="code">Vec</t>
            <t class=""> å¹¶ä¸”å¤§éƒ¨åˆ†æ—¶å€™æ²¡æœ‰è¢«å®ç°ã€‚åœ¨æ­¤æˆ‘ä»¬å…ˆä¸åœ¨æ„å®ƒä»¬ã€‚</t>
          </p>
          <p>
            <t class="">æƒ³è¦åœ¨ App ä¸­åŠ å…¥ä¸€ä¸ª </t>
            <t class="code">Node</t>
            <t class="">ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ </t>
            <t class="code">#add_render_graph_node</t>
            <t class=""> å‡½æ•°ã€‚</t>
          </p>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">render_app
    // æ·»åŠ ä¸€ä¸ªå­å›¾
    .add_render_sub_graph(Core3d)
    // æ·»åŠ  Node
    .add_render_graph_node::&lt;ViewNodeRunner&lt;PrepassNode&gt;&gt;(Core3d, Node3d::Prepass)
    .add_render_graph_node::&lt;ViewNodeRunner&lt;DeferredGBufferPrepassNode&gt;&gt;(
        Core3d,
        Node3d::DeferredPrepass,
    )
    ...
    ...
    // å®šä¹‰è¾¹ï¼ˆNode çš„é¡ºåºï¼‰
    .add_render_graph_edges( 
        Core3d,
        (
            Node3d::Prepass,
            Node3d::DeferredPrepass,
            Node3d::CopyDeferredLightingId,
            Node3d::EndPrepasses,
            Node3d::StartMainPass,
            Node3d::MainOpaquePass,
            Node3d::MainTransmissivePass,
            Node3d::MainTransparentPass,
            Node3d::EndMainPass,
            Node3d::Tonemapping,
            Node3d::EndMainPassPostProcessing,
            Node3d::Upscaling,
        ),
    );</code></pre>
            </div>
            <div class="caption">
              <t class="">core_3d ä¸­çš„ sub render graph æ·»åŠ  </t>
<a class="link" href="https://github.com/bevyengine/bevy/blob/release-0.15.2/crates/bevy_core_pipeline/src/core_3d/mod.rs">https://github.com/bevyengine/bevy/blob/9478432cb9d7ed0db9e5fafc8be148c0ddae35bc/crates/bevy_core_pipeline/src/core_3d/mod.rs#L85</a></div>
          </div>
          <p>
            <t class="">å…¶æ¥å—ä¸€ä¸ª </t>
            <t class="code">RenderSubGraph</t>
            <t class=""> å’Œä¸€ä¸ª </t>
            <t class="code">RenderLabel</t>
            <t class="">ã€‚è¿™ä¸¤ä¸ª trait éƒ½æ˜¯æ ‡ç­¾ traitï¼Œåªåšæ ‡è®°ä½œç”¨ã€‚å‰è€…æ ‡è®°æ¸²æŸ“å­å›¾ï¼Œåè€…æ ‡è®° Nodeã€‚æƒ³è¦å®šä¹‰ä¸€ä¸ªè‡ªå·±çš„ </t>
            <t class="code">RenderLabel</t>
            <t class=""> å¾ˆç®€å•ï¼ŒBevy æä¾›äº†åŒåçš„è¿‡ç¨‹å®ã€‚</t>
          </p>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">// * å®ç° RenderLable éœ€è¦å®ç° Debug, Clone, Eq
#[derive(Debug, Clone, Hash, PartialEq, Eq, RenderLabel)]
pub struct StartFooPass;</code></pre>
            </div>
            <div class="caption"></div>
          </div>
          <p>
            <t class="">å¦å¤–ï¼Œåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°æ·»åŠ  Node çš„æ—¶å€™ï¼Œåªä¼ å…¥äº† Node çš„ç±»å‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç»“æ„é¢˜ã€‚å› ä¸º </t>
            <t class="code">#add_render_graph_node</t>
            <t class=""> è¦æ±‚äº†ä¼ å…¥ Node ç±»å‹æ˜¯å®ç° </t>
            <t class="code">FromWorld</t>
            <t class=""> trait çš„ã€‚</t>
            <t class="code">FromWorld</t>
            <t class=""> è¿™ä¸ª trait æ”¯æŒä» world åˆ›å»ºä¸€ä¸ªå¯¹åº”ç±»å‹çš„å®ä¾‹ã€‚æ‰€ä»¥ä¸å¿…æˆ‘ä»¬æ‰‹å·¥æ·»åŠ ä¸€ä¸ªå®ä¾‹ã€‚</t>
          </p>
          <p>
            <t class="">åœ¨ç»§ç»­æˆ‘ä»¬çš„è¯é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆä»‹ç»ä¸€ä¸ªæ¦‚å¿µï¼šView</t>
          </p>
          <h3 id="heading3_0">
            <t class="">View</t>
          </h3>
          <p>
            <t class="">åœ¨å›¾å½¢ API ä¸­ï¼ˆè‡³å°‘åœ¨ wgpu ä¸­ï¼‰ï¼Œä¸€æ¬¡æ¸²æŸ“çš„ç›®æ ‡æ˜¯ä¸€ä¸ªè´´å›¾çš„å…¶ä¸­ä¸€ä¸ª Viewï¼Œå…¶æ˜¯ä¸€ä¸ªè´´å›¾çš„ä¸€ä¸ªçŠ¶æ€ã€‚åœ¨ Bevy ä¸­ï¼ŒView è¢«ç”¨ </t>
            <t class="code">Entity</t>
            <t class=""> å’Œ </t>
            <t class="code">ViewTarget</t>
            <t class=""> ç»„ä»¶æ¥ç®¡ç†ã€‚æˆ‘ä»¬åœ¨ä¼ é€’çš„è¿‡ç¨‹ä¸­ä½¿ç”¨ </t>
            <t class="code">Entity</t>
            <t class=""> æ¥ä¼ é€’ã€‚éœ€è¦ç”¨åˆ° View æ—¶ï¼Œåˆ™ query å®ƒçš„ </t>
            <t class="code">ViewTarget</t>
            <t class="">ï¼Œè·å– Viewï¼Œè°ƒç”¨å…¶ </t>
            <t class="code">#get_color_attachment</t>
            <t class=""> å³å¯ã€‚</t>
          </p>
          <h3 id="heading3_1">
            <t class="">ViewNode</t>
          </h3>
          <p>
            <t class="code">Node</t>
            <t class=""> æ˜¯ä¸€ä¸ª </t>
            <t class="code">trait</t>
            <t class="">ï¼Œæˆ‘ä»¬åœ¨ Bevy ä¸­æœ€å¸¸ç”¨çš„ </t>
            <t class="code">Node</t>
            <t class=""> çš„å®ç°æ˜¯ </t>
            <t class="code">ViewNodeRunner&lt;N: ViewNode&gt; (struct)</t>
            <t class=""> ã€‚å…¶ä¸­ </t>
            <t class="code">ViewNode</t>
            <t class=""> æ˜¯ä¸€ä¸ªæ›´æ˜“ç”¨çš„å¯ä»¥ä» </t>
            <t class="code">world</t>
            <t class=""> è·å– View ä¸Šä¸‹æ–‡çš„ </t>
            <t class="code">trait</t>
            <t class="">ã€‚ä¹Ÿæ˜¯æˆ‘ä»¬æ·»åŠ æ¸²æŸ“å†…å®¹æœ€å¸¸å®ç°çš„ trait ä¹‹ä¸€ã€‚</t>
          </p>
          <p>
            <t class="">çœ‹ä¸€ä¸‹å…¶å†…å®¹å°±å¾ˆå¥½ç†è§£äº†ï¼š</t>
          </p>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">pub trait ViewNode {
    type ViewQuery: ReadOnlyQueryData;

    // Required method
    fn run&lt;'w&gt;(
        &amp;self,
        graph: &amp;mut RenderGraphContext&lt;'_&gt;,
        render_context: &amp;mut RenderContext&lt;'w&gt;,
        view_query: &lt;Self::ViewQuery as WorldQuery&gt;::Item&lt;'w&gt;,
        world: &amp;'w World,
    ) -&gt; Result&lt;(), NodeRunError&gt;;

    // Provided method
    fn update(&amp;mut self, _world: &amp;mut World) { ... }
}</code></pre>
            </div>
            <div class="caption"><a class="link" href="https://docs.rs/bevy/latest/bevy/render/render_graph/trait.ViewNode.html">https://docs.rs/bevy/latest/bevy/render/render_graph/trait.ViewNode.html</a></div>
          </div>
          <blockquote>
            <t class="">æ³¨ï¼š</t>
            <t class="code">ViewNode</t>
            <t class=""> å¹¶ä¸æ˜¯ Node çš„å®ç°ï¼Œ</t>
            <t class="code">ViewNodeRunner</t>
            <t class=""> æ‰æ˜¯ã€‚</t>
          </blockquote>
          <p>
            <t class="code">ViewQuery</t>
            <t class=""> æ˜¯æˆ‘ä»¬è¦ query çš„æºå¸¦ </t>
            <t class="code">ViewTarget</t>
            <t class=""> ï¼ˆæˆ–å…¶å®ƒèƒ½æä¾› Viewï¼‰çš„å®ä½“çš„ Query ç±»å‹ã€‚</t>
          </p>
          <p>
            <t class="">åœ¨ </t>
            <t class="code">#run</t>
            <t class=""> ä¸­ï¼Œæˆ‘ä»¬é€ä¸€ä»‹ç»ä¸€ä¸‹å„ä¸ªå‚æ•°</t>
          </p>
          <ul>
            <li>
              <t class="code">render_context</t>
              <t class=""> åŒ…å«äº† RenderDevice, CommandEncoder ç­‰æ¸²æŸ“ä¸Šä¸‹æ–‡å†…å®¹</t>
            </li>
          </ul>
          <ul>
            <li>
              <t class="code">graph</t>
              <t class=""> åŒ…å«äº†æˆ‘ä»¬å½“å‰æ¸²æŸ“å›¾çš„å„ç±»ä¸Šä¸‹æ–‡ä¿¡æ¯</t>
            </li>
          </ul>
          <ul>
            <li>
              <t class="code">view_query</t>
              <t class=""> æ˜¯æˆ‘ä»¬è¦çš„ Query çš„ View çš„ç»“æœ</t>
            </li>
          </ul>
          <p>
            <t class="">æ³¨æ„ï¼Œå¦‚æœä¸€ä¸ª </t>
            <t class="code">ViewNode</t>
            <t class=""> å®ç°äº† </t>
            <t class="code">FromWorld</t>
            <t class="">ï¼Œé‚£ä¹ˆå…¶ </t>
            <t class="code">ViewNodeRunner</t>
            <t class=""> ä¼šè‡ªåŠ¨è¢«å®ç° </t>
            <t class="code">FromWorld</t>
            <t class="">ï¼Œæ‰€ä»¥ä¸ºäº†è®© </t>
            <t class="code">ViewNodeRunner</t>
            <t class=""> èƒ½å¤Ÿè¢«æ’å…¥ Appï¼Œè®°å¾—</t>
            <t class="">ä¸º ViewNode ç±»å‹å®ç° </t>
            <t class="code">FromWorld</t>
            <t class="">.</t>
          </p>
          <div class="callout">
            <div class="icon">ğŸ’¡</div>
            <div class="text">
              <t class="">å®ç°äº† </t>
              <t class="code">Default</t>
              <t class=""> çš„ç±»å‹ä¼šè‡ªåŠ¨è¢«å®ç° </t>
              <t class="code">FromWorld</t>
              <t class="">.</t>
            </div>
          </div>
          <h3 id="heading3_2">
            <t class="">ViewNode çš„å®ç°æ¡ˆä¾‹</t>
          </h3>
          <p>
            <t class="">åœ¨ Bevy æ ¸å¿ƒæ¸²æŸ“ç®¡çº¿çš„ä¸é€æ˜ Pass Node ä¸­ï¼Œå…¶ Query çš„æ˜¯ </t>
            <t class="">ExtractedCamera</t>
            <t class=""> å’Œå…¶å®ƒæ¸²æŸ“ç›¸å…³çš„ç»„ä»¶ã€‚</t>
          </p>
          <div class="callout">
            <div class="icon">ğŸ‘‰</div>
            <div class="text">
              <t class="code">ExtractedCamera</t>
              <t class=""> æ˜¯æ¸²æŸ“ä¸–ç•Œä¸­æä¾›äº†æ¸²æŸ“æ‰€éœ€ä¿¡æ¯çš„ç›¸æœºç»„ä»¶ã€‚åœ¨ Bevy ä¸­ï¼Œ</t>
              <t class="">Extract</t>
              <t class=""> è¡¨ç¤ºå°†ä»ä¸»ä¸–ç•Œæå–åˆ°æ¸²æŸ“ä¸–ç•Œä¸­çš„è¿‡ç¨‹ã€‚æˆ‘ä»¬ä¸»ç›¸æœºå®ä½“å’Œå®ƒçš„ç»„ä»¶ä¼šåœ¨ä¸€ä¸ª </t>
              <t class="code">ExtractSchedule</t>
              <t class=""> é˜¶æ®µçš„ system ä¸­è¢« Queryï¼Œç„¶åè¢«å®ä¾‹æˆä¸€ä¸ª </t>
              <t class="code">ExtractedCamera</t>
              <t class="">ï¼Œæ’å…¥åˆ°æ¸²æŸ“ä¸–ç•Œçš„ç›¸æœºå®ä½“ä¸­ã€‚</t>
            </div>
          </div>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">impl ViewNode for MainOpaquePass3dNode {
    type ViewQuery = (
        Entity,
        &amp;'static ExtractedCamera,
        &amp;'static ViewTarget,
        &amp;'static ViewDepthTexture,
        Option&lt;&amp;'static SkyboxPipelineId&gt;,
        Option&lt;&amp;'static SkyboxBindGroup&gt;,
        &amp;'static ViewUniformOffset,
    );
    ...
}</code></pre>
            </div>
            <div class="caption"><a class="link" href="https://github.com/bevyengine/bevy/blob/release-0.15.2/crates/bevy_core_pipeline/src/core_3d/main_opaque_pass_3d_node.rs">https://github.com/bevyengine/bevy/blob/release-0.15.2/crates/bevy_core_pipeline/src/core_3d/main_opaque_pass_3d_node.rs</a></div>
          </div>
          <h1 id="heading1_4">
            <t class="">æ¸²æŸ“é˜¶æ®µ</t>
          </h1>
          <p>
            <t class="">ç›´æ¥ä¸ </t>
            <t class="code">RenderGraph</t>
            <t class=""> å’Œ </t>
            <t class="code">Node</t>
            <t class=""> äº¤äº’è™½ç„¶åº•å±‚å’Œçµæ´»ï¼Œä½†åœ¨äººä½“å·¥å­¦å’Œå¯æ‹“å±•æ€§ä¸Šå¹¶ä¸é‚£ä¹ˆå¥½ã€‚Bevy æä¾›äº†ä¸€ä¸ªæ›´å¥½çš„ç®¡ç†æ¸²æŸ“å†…å®¹çš„æ•°æ®ç»“æ„ï¼š</t>
            <t class="code">BinnedRenderPhase</t>
            <t class="">ã€‚</t>
          </p>
          <div class="callout">
            <div class="icon">ğŸ’¡</div>
            <div class="text">
              <t class="">Bin çš„ä¸­æ–‡æ˜¯â€œæ¡¶â€ï¼ŒBinned ä»£è¡¨åˆ†â€æ¡¶â€œæ•°æ®ç»“æ„ï¼Œæˆ–è€…è¯´åˆ†ç»„ã€‚æˆ‘ä»¬ä¼šå¯¹å…ƒç´ è¿›è¡Œåˆ†ç»„å­˜å‚¨ã€‚ä¸€ä¸ªç›´è§‚çš„ Binned çš„æ•°æ®ç»“æ„æ˜¯ </t>
              <t class="code">HashMap</t>
              <t class=""> ï¼Œå“ˆå¸Œå€¼æ˜¯æ¡¶çš„ç´¢å¼•ï¼Œæ¯ä¸ªå“ˆå¸Œå€¼å¯¹åº”çš„ä¸€ä¸ªæ•°ç»„ï¼Œä¹Ÿå°±æ˜¯æ¡¶ã€‚ç”¨äºé¿å…å“ˆå¸Œå€¼ç›¸åŒçš„å…ƒç´ æ— å¤„æ‰€æ”¾ã€‚</t>
            </div>
          </div>
          <p>
            <t class="">è¿™æ˜¯ä¸€ä¸ªæœ‰äº›å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œè¦è®²è§£å®ƒçš„å®ç°éœ€è¦èŠ±äº›æ—¶é—´ã€‚æˆ‘ä»¬å…ˆä»ç›´è§‰ä¸Šäº†è§£ä¸€ä¸‹å®ƒæ˜¯ä»€ä¹ˆï¼š</t>
          </p>
          <ul>
            <li>
              <t class="">å®ƒä¸æ˜¯ä¸€ä¸ª Node</t>
            </li>
          </ul>
          <ul>
            <li>
              <t class="">å®ƒæ˜¯ä¸€ä¸ªç®¡ç†è¢«æ¸²æŸ“çš„ç‰©ä½“çš„ä¸Šä¸‹æ–‡çš„æ•°æ®ç»“æ„</t>
            </li>
          </ul>
          <ul>
            <li>
              <t class="">å®ƒå¯ä»¥ç®¡ç†è¿™äº›ä¿¡æ¯</t>
              <ul>
                <li>
                  <t class="">è¦è¢«æ¸²æŸ“å®ä½“åˆ—è¡¨</t>
                </li>
              </ul>
              <ul>
                <li>
                  <t class="">ç”¨ä»€ä¹ˆè¡Œä¸ºæ¸²æŸ“è¿™äº›å®ä½“ï¼ˆæ¸²æŸ“å‡½æ•°ï¼‰</t>
                </li>
              </ul>
              <ul>
                <li>
                  <t class="">å®ä½“çš„æ¸²æŸ“é¡ºåºæ˜¯æ€æ ·çš„</t>
                </li>
              </ul>
            </li>
          </ul>
          <ul>
            <li>
              <t class="">ä¸€ä¸ªæ¸²æŸ“é˜¶æ®µçš„æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰æ¸²æŸ“å‘½ä»¤ä½¿ç”¨åŒä¸€ä¸ª </t>
              <t class="code">RenderPass</t>
              <t class=""> ï¼Œæ— æ³•ä¸­é€”åˆ‡æ¢</t>
            </li>
          </ul>
          <ul>
            <li>
              <t class="">ä¸€ä¸ªå®ä½“å¯ä»¥åœ¨</t>
              <t class="code">BinnedRenderPhase</t>
              <t class=""> ä¸­å‡ºç°å¤šæ¬¡ï¼Œä¾‹å¦‚åŒä¸€ä¸ªå®ä½“åˆ†åˆ«åœ¨ä¸åŒæ‰¹æ¬¡è¢«ç»˜åˆ¶</t>
            </li>
          </ul>
          <p>
            <t class="">è€Œä¸€åˆ‡ä¸€åˆ‡çš„å‡†å¤‡åï¼Œåœ¨ä½¿ç”¨ä¸Šã€‚æˆ‘ä»¬åªéœ€è¦åœ¨ä¸€ä¸ª Node ä¸­ï¼ŒQuery æˆ‘ä»¬è¦ç”¨çš„ </t>
            <t class="code">BinnedRenderPhase</t>
            <t class=""> ï¼Œè°ƒç”¨å…¶ä¸­çš„ </t>
            <t class="code">#render</t>
            <t class=""> å‡½æ•°ï¼Œå°±å¯ä»¥è¿›è¡Œåˆ†ç»„çš„åˆ†æ‰¹æ¬¡çš„æ¸²æŸ“ã€‚</t>
          </p>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">...
fn run(...) { // impl ViewNode for MainOpaquePass3dNode
...
  let opaque_phase = ... // ä»ä¸–ç•Œè·å¾— Opaque3d çš„ BinnedRenderPhase å®ä¾‹ï¼ˆç”¨ Resource ç®¡ç†ï¼‰

  // æ¸²æŸ“è¿™ä¸ªæ¸²æŸ“é˜¶æ®µ
  opaque_phase.render(&amp;mut render_pass, world, view_entity); 
  // è¿”å›å€¼æ˜¯ä¸€ä¸ª Resultï¼Œå®é™…ä½¿ç”¨ä¸­éœ€è¦å¤„ç†å¼‚å¸¸ï¼Œè¿™é‡Œç®€å†™
}
...</code></pre>
            </div>
            <div class="caption"><a class="link" href="https://github.com/bevyengine/bevy/blob/release-0.15.2/crates/bevy_core_pipeline/src/core_3d/main_opaque_pass_3d_node.rs">https://github.com/bevyengine/bevy/blob/release-0.15.2/crates/bevy_core_pipeline/src/core_3d/main_opaque_pass_3d_node.rs</a></div>
          </div>
          <p>
            <t class="">æˆ‘ä»¬åˆšåˆšä»‹ç»è¿‡ï¼Œ</t>
            <t class="code">BinnedRenderPhase</t>
            <t class=""> æ˜¯åˆ†ç»„æ•°æ®ç»“æ„ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æŒ‡å®š Item å’Œ Key çš„ç±»å‹æ‰èƒ½æ„å»ºè¿™ä¸ªæ•°æ®ç»“æ„ã€‚å¯¹äº Bevy çš„æ ¸å¿ƒä¸é€æ˜ç®¡çº¿æ¥è¯´ï¼ŒKey å’Œ Item åˆ†åˆ«æ˜¯è¿™æ ·çš„ï¼š</t>
          </p>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">// Item: éœ€è¦å®ç° BinnedPhaseItem
pub struct Opaque3d {
    ...
}
impl BinnedPhaseItem for Opaque3d {
    type BinKey = Opaque3dBinKey;
    ...
}

// Key: éœ€è¦å®ç° Clone + Send + Sync + Eq + Ord + Hash
#[derive(Clone, PartialEq, Eq, PartialOrd, Ord, Hash)]
pub struct Opaque3dBinKey { // Key
    pub pipeline: CachedRenderPipelineId,
    pub draw_function: DrawFunctionId,
    ...
}</code></pre>
            </div>
            <div class="caption"></div>
          </div>
          <p>
            <t class="">å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ </t>
            <t class="code">Opaque3dBinKey</t>
            <t class=""> ä¸­ï¼Œæˆ‘ä»¬æŒ‡å®šäº† pipeline å’Œ draw_function çš„ Id ç­‰æ•°æ®ï¼Œè¿™æ„å‘³ç€åœ¨ä¸€ä¸ªæ¸²æŸ“é˜¶æ®µä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸åŒçš„æ¸²æŸ“ç®¡çº¿å’Œç»˜åˆ¶å‡½æ•°ã€‚</t>
          </p>
          <p>
            <t class="">æƒ³è¦ç»™ä¸€ä¸ªæ¸²æŸ“é˜¶æ®µæ·»åŠ æ¸²æŸ“ç‰©ä½“ï¼Œè°ƒç”¨å…¶ </t>
            <t class="code">#add</t>
            <t class=""> å‡½æ•°å³å¯ï¼Œè¿™æ˜¯å®ƒçš„å‡½æ•°ç­¾åï¼š</t>
          </p>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">pub fn add(
    &amp;mut self,
    key: &lt;BPI as BinnedPhaseItem&gt;::BinKey,
    entity: (Entity, MainEntity),
    phase_type: BinnedRenderPhaseType,
)</code></pre>
            </div>
            <div class="caption"><a class="link" href="https://docs.rs/bevy/latest/bevy/render/render_phase/struct.BinnedRenderPhase.html">https://docs.rs/bevy/latest/bevy/render/render_phase/struct.BinnedRenderPhase.html</a></div>
          </div>
          <p>
            <t class="">å…¶ä¸­ MainEntity æ˜¯é™„åŠ åœ¨æ¸²æŸ“ä¸–ç•Œå®ä½“çš„ç»„ä»¶ï¼Œç”¨äºè·Ÿè¸ªä¸»ä¸–ç•Œçš„å®ä½“ã€‚</t>
          </p>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">pub struct MainEntity(Entity);</code></pre>
            </div>
            <div class="caption"><a class="link" href="https://docs.rs/bevy/latest/bevy/render/sync_world/struct.MainEntity.html">https://docs.rs/bevy/latest/bevy/render/sync_world/struct.MainEntity.html</a></div>
          </div>
          <h2 id="heading2_0">
            <t class="">Draw traitã€DrawFunctions</t>
          </h2>
          <p>
            <t class="">æˆ‘ä»¬ä»‹ç»äº†åœ¨ </t>
            <t class="code">BinKey</t>
            <t class=""> ä¸­å¯ä»¥æŒ‡å®š </t>
            <t class="code">DrawFunctionId</t>
            <t class=""> æ¥åŒºåˆ†ä¸€ä¸ªæ¸²æŸ“é˜¶æ®µçš„ä¸åŒçš„æ¸²æŸ“è¡Œä¸ºï¼Œè¿™å¾—ç›Šäº Bevy æä¾›äº†å®ç”¨çš„æ¸²æŸ“å‡½æ•°å°è£…ã€‚åœ¨ Bevy ä¸­ï¼Œæœ‰ä¸€ä¸ªå£°æ˜æ¸²æŸ“è¡Œä¸ºçš„ trait å«åš </t>
            <t class="code">Draw</t>
            <t class="">ã€‚è¿˜æœ‰ä¸€ä¸ªå­˜å‚¨ </t>
            <t class="code">Draw</t>
            <t class=""> çš„å®ç°çš„ç»“æ„ä½“å«</t>
            <t class="code">DrawFunctions&lt;P: PhaseItem&gt;</t>
            <t class="">ï¼Œæ˜¯ä¸€ä¸ª </t>
            <t class="code">Resource</t>
            <t class="">ï¼Œå…¶é‡Œé¢æ˜¯ä¸€ä¸ª </t>
            <t class="code">Vec&lt;Box&lt;dyn Draw&lt;P: PhaseItem&gt;&gt;&gt;</t>
            <t class="">ã€‚</t>
            <t class="code">PhaseItem</t>
            <t class=""> æˆ‘ä»¬ä¸Šæ–‡æœ‰ä»‹ç»ï¼Œå®ƒå­˜å‚¨äº†æ¸²æŸ“æŸä¸ªç‰©ä½“æ‰€éœ€çš„éƒ¨åˆ†ä¸Šä¸‹æ–‡ï¼ˆå¦‚ Entity ç­‰ï¼‰ã€‚</t>
          </p>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">pub trait Draw&lt;P&gt;:
    Send
    + Sync
    + 'static
where
    P: PhaseItem,
{
    // Required method
    fn draw&lt;'w&gt;(
        &amp;mut self,
        world: &amp;'w World,
        pass: &amp;mut TrackedRenderPass&lt;'w&gt;,
        view: Entity,
        item: &amp;P,
    ) -&gt; Result&lt;(), DrawError&gt;;

    // Provided method
    fn prepare(&amp;mut self, world: &amp;World) { ... }
}</code></pre>
            </div>
            <div class="caption"><a class="link" href="https://docs.rs/bevy/latest/bevy/render/render_phase/trait.Draw.html">https://docs.rs/bevy/latest/bevy/render/render_phase/trait.Draw.html</a></div>
          </div>
          <h2 id="heading2_1">
            <t class="">RenderCommand trait</t>
          </h2>
          <p>
            <t class="">ä¸è¿‡æˆ‘ä»¬å¹¶ä¸ç›´æ¥æ¥è§¦ </t>
            <t class="code">Draw</t>
            <t class=""> è¿™ä¸ª traitã€‚Bevy æä¾›äº†ä¸€ä¸ªåä¸º </t>
            <t class="code">RenderCommand</t>
            <t class=""> çš„å°è£…ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å…¶æ¥å£°æ˜æ¸²æŸ“è¡Œä¸ºã€‚å†å°†å…¶è½¬æ¢ä¸ºå®ç°äº† </t>
            <t class="code">Draw</t>
            <t class=""> trait çš„ç»“æ„ä½“ï¼Œæ’å…¥ </t>
            <t class="code">DrawFunctions</t>
            <t class=""> ä¸­ã€‚ä»¥ä¸‹ä¸º example </t>
<a class="link" href="https://github.com/bevyengine/bevy/blob/release-0.15.2/examples/shader/custom_phase_item.rs">custom_phase_item.rs</a>
            <t class=""> ä¸­çš„ä¸€ä¸ªä¾‹å­ã€‚ä¸éœ€è¦ä»”ç»†é˜…è¯»ä»£ç ï¼Œä½†è¯·ä»”ç»†é˜…è¯»æ³¨é‡Šã€‚</t>
          </p>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">// å£°æ˜ä¸€ä¸ªæ–°çš„ Command
struct DrawCustomPhaseItem;

// ä¸ºå…¶å®ç° RenderCommand trait
impl&lt;P&gt; RenderCommand&lt;P&gt; for DrawCustomPhaseItem
where
    P: PhaseItem,
{
    type Param = SRes&lt;CustomPhaseItemBuffers&gt;;
    type ViewQuery = ();
    type ItemQuery = ();
    fn render&lt;'w&gt;(...) -&gt; RenderCommandResult {
        // æ¸²æŸ“è¡Œä¸º
        ...
    }
}

// ä¸€ç³»åˆ— RenderCommand çš„å…ƒç»„è¢«å®ç°äº† RenderCommandï¼Œ
// æˆ‘ä»¬å€Ÿç”±è¿™ç§æ–¹å¼æ¥å°†å¤šä¸ª Command ç»“åˆåœ¨ä¸€èµ·
type DrawCustomPhaseItemCommands = (SetItemPipeline, DrawCustomPhaseItem);

...

fn main() {
    ...
    app.get_sub_app_mut(RenderApp)
      .unwrap()
      ...
      // ä¸º App çš„ Opaque3d æ¸²æŸ“é˜¶æ®µæ·»åŠ  DrawCustomPhaseItemCommands
      .add_render_command::&lt;Opaque3d, DrawCustomPhaseItemCommands&gt;()
}</code></pre>
            </div>
            <div class="caption"></div>
          </div>
          <p>
            <t class="code">#add_render_command</t>
            <t class=""> æ˜¯ä¸€ä¸ªå‡½æ•°ç³–ï¼šå®ƒçš„å®ç°æ˜¯ç”¨æˆ‘ä»¬ä¼ å…¥çš„ </t>
            <t class="code">PhaseItem</t>
            <t class=""> å’Œ</t>
            <t class="code">RenderCommand</t>
            <t class=""> ç±»å‹å®ä¾‹ä¸€ä¸ªå®ç°äº† </t>
            <t class="code">Draw</t>
            <t class=""> trait çš„ç»“æ„ä½“ï¼ˆ</t>
            <t class="code">RenderCommandState</t>
            <t class="">ï¼‰ã€‚å†è·å–ä¸–ç•Œä¸­å¯¹åº” </t>
            <t class="code">PhaseItem</t>
            <t class=""> ç±»å‹çš„ </t>
            <t class="code">DrawFunctions</t>
            <t class=""> çš„ </t>
            <t class="code">Resource</t>
            <t class="">ï¼Œå°† </t>
            <t class="code">RenderCommandState</t>
            <t class=""> åŠ å…¥è¿™ä¸ª </t>
            <t class="code">DrawFunctions</t>
            <t class=""> ä¸­ã€‚</t>
          </p>
          <div class="callout">
            <div class="icon">ğŸ‘‰</div>
            <div class="text">
              <t class="">æƒ³è¦è·å¾—ä¸€ä¸ª</t>
              <t class="code">DrawFunctionId</t>
              <t class=""> æˆ‘ä»¬æœ‰ä¸¤ç§æ–¹å¼ï¼š</t>
            </div>
          </div>
          <h2 id="heading2_2">
            <t class="">å¦‚ä½•æ¸²æŸ“ä¸€ä¸ªæ¸²æŸ“é˜¶æ®µ</t>
          </h2>
          <p>
            <t class="">ä¸€ä¸ªæ¸²æŸ“é˜¶æ®µå®é™…ä¸Šè¿˜æ˜¯åœ¨ä¸€ä¸ª Node ä¸­è¢«æ¸²æŸ“çš„ã€‚</t>
            <t class="code">BinnedRenderPhase</t>
            <t class=""> æä¾›äº† </t>
            <t class="code">#render</t>
            <t class=""> å‡½æ•°ã€‚åœ¨ä¸€ä¸ª Node ä¸­è°ƒç”¨ </t>
            <t class="code">BinnedRenderPhase#render</t>
            <t class=""> å³ä¸ºæ‰§è¡Œ </t>
            <t class="code">BinnedRenderPhase</t>
            <t class=""> çš„æ¸²æŸ“ã€‚ä¸‹ä¸º </t>
            <t class="code">#render</t>
            <t class=""> å‡½æ•°çš„å‡½æ•°ç­¾åã€‚</t>
          </p>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">pub fn render&lt;'w&gt;(
    &amp;self,
    render_pass: &amp;mut TrackedRenderPass&lt;'w&gt;,
    world: &amp;'w World,
    view: Entity,
) -&gt; Result&lt;(), DrawError&gt;</code></pre>
            </div>
            <div class="caption"><a class="link" href="https://docs.rs/bevy/latest/bevy/render/render_phase/struct.BinnedRenderPhase.html">https://docs.rs/bevy/latest/bevy/render/render_phase/struct.BinnedRenderPhase.html</a></div>
          </div>
          <p>
            <t class="">å‚è€ƒé˜…è¯» 
</t>
<a class="link" href="https://github.com/bevyengine/bevy/blob/release-0.15.2/crates/bevy_core_pipeline/src/core_3d/main_opaque_pass_3d_node.rs">https://github.com/bevyengine/bevy/blob/release-0.15.2/crates/bevy_core_pipeline/src/core_3d/main_opaque_pass_3d_node.rs</a></p>
          <h2 id="heading2_3">
            <t class="">å…¶å®ƒçš„æ¸²æŸ“é˜¶æ®µç»“æ„ä½“</t>
          </h2>
          <p>
            <t class="">é™¤äº† BinnedRenderPhaseï¼ŒBevy è¿˜æœ‰å…¶å®ƒæ¸²æŸ“é˜¶æ®µçš„ç»“æ„ã€‚</t>
          </p>
          <div class="table">
            <table>
              <tr>
                <td class="table_header">RenderPhase</td>
                <td>ä»‹ç»</td>
              </tr>
              <tr>
                <td class="table_header">BinnedRenderPhase</td>
                <td>é‡‡ç”¨ Bin çš„æ•°æ®ç»“æ„å­˜å‚¨ PhaseItem</td>
              </tr>
              <tr>
                <td class="table_header">SortedRenderPhase</td>
                <td>é‡‡ç”¨ Vec å­˜å‚¨ PhaseItemï¼Œå¯æ’åº</td>
              </tr>
            </table>
          </div>
          <h1 id="heading1_5">
            <t class="">ä½¿ç”¨ bevy_render</t>
          </h1>
          <p>
            <t class="">æˆ‘ä»¬æ¢³ç†ä¸€ä¸‹ï¼Œè¦æƒ³åŠ å…¥è‡ªå®šä¹‰çš„æ¸²æŸ“æ•ˆæœï¼Œæœ‰è¿™æ ·çš„æƒ…å†µï¼š</t>
          </p>
          <ul>
            <li>
              <t class="">å¦‚æœè¦åœ¨æŸä¸ª Bevy ä¸­å·²æœ‰çš„æ¸²æŸ“é˜¶æ®µä¸­æ’å…¥ä¸€ä¸ªè‡ªå®šä¹‰æ¸²æŸ“è¡Œä¸ºï¼Œæˆ‘ä»¬éœ€è¦</t>
              <ul>
                <li>
                  <t class="">åˆ›å»ºæˆ–å®ç°è‡ªå·±çš„ </t>
                  <t class="code">RenderCommand</t>
                  <t class="">ã€</t>
                  <t class="code">Pipeline</t>
                  <t class=""> ç­‰æ¸²æŸ“æ‰€éœ€èµ„æº</t>
                </li>
              </ul>
              <ul>
                <li>
                  <t class="">åŠ å…¥ä¸€ä¸ª queue é˜¶æ®µæ‰§è¡Œçš„ systemï¼Œåœ¨è¿™ä¸ª system ä¸­ï¼Œæˆ‘ä»¬ç»™æˆ‘ä»¬æƒ³è¦çš„æ¸²æŸ“é˜¶æ®µåŠ å…¥ </t>
                  <t class="code">PhaseItem</t>
                </li>
              </ul>
              <ul>
                <li>
                  <t class="">å‚è€ƒ </t>
<a class="link" href="https://github.com/bevyengine/bevy/blob/release-0.15.2/examples/shader/custom_phase_item.rs">https://github.com/bevyengine/bevy/blob/release-0.15.2/examples/shader/custom_phase_item.rs</a></li>
              </ul>
            </li>
          </ul>
          <ul>
            <li>
              <t class="">å¦‚æœæˆ‘ä»¬çš„æ¸²æŸ“è¡Œä¸ºä¸å’Œä»»ä½•ç°æœ‰çš„æ¸²æŸ“é˜¶æ®µå…±äº«ï¼Œæ¯”å¦‚åå¤„ç†æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦</t>
              <ul>
                <li>
                  <t class="">å®ç°è‡ªå·±çš„ ViewNode</t>
                </li>
              </ul>
              <ul>
                <li>
                  <t class="">åœ¨ App ä¸­æ·»åŠ  Nodes å’Œ Edges</t>
                </li>
              </ul>
            </li>
          </ul>
          <p></p>
          <h1 id="heading1_6">
            <t class="">å‚è€ƒé˜…è¯»</t>
          </h1>
          <h2 id="heading2_4">
            <t class="">Extract</t>
          </h2>
          <ul>
            <li>
              <t class="">ExtractScheduleï¼š</t>
<a class="link" href="https://docs.rs/bevy/latest/bevy/prelude/struct.ExtractSchedule.html">https://docs.rs/bevy/latest/bevy/prelude/struct.ExtractSchedule.html</a></li>
          </ul>
          <ul>
            <li>
              <t class="">ExtractComponentï¼š </t>
<a class="link" href="https://docs.rs/bevy/latest/bevy/render/extract_component/index.html">https://docs.rs/bevy/latest/bevy/render/extract_component/index.html</a></li>
          </ul>
          <ul>
            <li>
              <t class="">extract ç›¸æœºåˆ° </t>
              <t class="code">ExtractedCamera</t>
              <t class=""> çš„å®ç°ï¼š</t>
<a class="link" href="https://github.com/bevyengine/bevy/blob/main/crates/bevy_render/src/camera/camera.rs">https://github.com/bevyengine/bevy/blob/main/crates/bevy_render/src/camera/camera.rs</a></li>
          </ul>
          <p></p>
        </div>
      </div>
    </div>
  </body>
</html>

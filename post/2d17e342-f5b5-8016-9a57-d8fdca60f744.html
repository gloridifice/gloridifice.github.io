<!DOCTYPE html><html>
  <head>
    <meta name="darkreader-lock" content="true">
    <link rel="alternate" type="application/rss+xml" title="Koiro's Cat Café" href="/rss.xml">
    <meta http-equiv="Content-Type" content="charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/assets/js/header.js"></script>
    <script src="/assets/katex/katex.js"></script>
<script defer src="/assets/katex/auto-render.min.js" onload="renderMathInElement(document.body);"></script>    <script>document.addEventListener(&quot;DOMContentLoaded&quot;, function() {
    renderMathInElement(document.body, {
      delimiters: [
          {left: '$$', right: '$$', display: false},
      ],
      throwOnError : false
    });
});</script>
    <link rel="stylesheet" href="/assets/katex/katex.css">
    <link rel="stylesheet" href="/assets/css/reset.css">
    <link rel="stylesheet" href="/assets/css/root.css">
    <link rel="stylesheet" href="/assets/css/color_scheme_v2.dark_mode.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;600;700&amp;display=swap" rel="stylesheet">
    <script src="/assets/js/highlightjs/highlight.js"></script>
    <link rel="stylesheet" href="/assets/css/layout.css">
    <link rel="stylesheet" href="/assets/css/page_content.css">
    <link rel="stylesheet" href="/assets/css/post.css">
    <link rel="stylesheet" href="/assets/css/color_scheme_v2.dark_mode.css">
    <link rel="stylesheet" href="/assets/css/highlightjs/github-dark.css">
    <title>⌨️ 优化键盘布局，改善生活福祉</title>
  </head>
  <body>
    <script>hljs.highlightAll();</script>
    <div class="post">
      <div class="sidebar_wrapper_left sidebar_wrapper">
        <div class="navi"><a class="navi_link button" href="/home.html"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" version="1.1" width="21" height="20.999996185302734" viewBox="0 0 21 20.999996185302734"><defs><clipPath id="master_svg0_9_0235"><rect x="0" y="0" width="21" height="20.999996185302734" rx="0"/></clipPath></defs><g clip-path="url(#master_svg0_9_0235)"><g><path d="M9.9628,1.059317C10.27877,0.8135611,10.7212,0.8135611,11.03716,1.059317C11.03716,1.059317,18.9122,7.18432,18.9122,7.18432C19.1253,7.35009,19.25,7.60498,19.25,7.875C19.25,7.875,19.25,17.5,19.25,17.5C19.25,18.1962,18.9734,18.8639,18.4811,19.3561C17.9889,19.8484,17.321199999999997,20.125,16.625,20.125C16.625,20.125,4.375,20.125,4.375,20.125C3.67881,20.125,3.01113,19.8484,2.518845,19.3561C2.026561,18.8639,1.75,18.1962,1.75,17.5C1.75,17.5,1.75,7.875,1.75,7.875C1.75,7.60498,1.874664,7.35009,2.087802,7.18432C2.087802,7.18432,9.9628,1.059317,9.9628,1.059317C9.9628,1.059317,9.9628,1.059317,9.9628,1.059317ZM8.75,18.375C8.75,18.375,12.25,18.375,12.25,18.375C12.25,18.375,12.25,11.375,12.25,11.375C12.25,11.375,8.75,11.375,8.75,11.375C8.75,11.375,8.75,18.375,8.75,18.375C8.75,18.375,8.75,18.375,8.75,18.375ZM14,18.375C14,18.375,14,10.5,14,10.5C14,10.01674,13.6083,9.625,13.125,9.625C13.125,9.625,7.875,9.625,7.875,9.625C7.39176,9.625,7,10.01674,7,10.5C7,10.5,7,18.375,7,18.375C7,18.375,4.375,18.375,4.375,18.375C4.14293,18.375,3.92038,18.2828,3.75628,18.1187C3.59219,17.9547,3.5,17.732,3.5,17.5C3.5,17.5,3.5,8.30295,3.5,8.30295C3.5,8.30295,10.5,2.8585000000000003,10.5,2.8585000000000003C10.5,2.8585000000000003,17.5,8.30295,17.5,8.30295C17.5,8.30295,17.5,17.5,17.5,17.5C17.5,17.732,17.4078,17.9547,17.2437,18.1187C17.0796,18.2828,16.857,18.375,16.625,18.375C16.625,18.375,14,18.375,14,18.375C14,18.375,14,18.375,14,18.375Z" fill-rule="evenodd" fill="#373737" fill-opacity="1"/></g></g></svg></a><a class="navi_link button" href="/blogs.html"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#434343"><path d="M520-600v-240h320v240H520ZM120-440v-400h320v400H120Zm400 320v-400h320v400H520Zm-400 0v-240h320v240H120Zm80-400h160v-240H200v240Zm400 320h160v-240H600v240Zm0-480h160v-80H600v80ZM200-200h160v-80H200v80Zm160-320Zm240-160Zm0 240ZM360-280Z"/></svg></a><a class="navi_link button" href="/portfolio.html"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#434343"><path d="M619-108q-11 11-25.5 17T563-85q-16 0-31-6t-26-17l-56-56q-11-11-16.5-24.5T427-216q-1-14 3.5-28t13.5-26l6-8-326-466 156-156 509 509q11 11 17 25.5t6 30.5q0 16-6 31t-17 26L619-108ZM507-335l113-112-340-340-52 52 279 400Zm56 170 169-169-56-57-170 170 57 56Zm-56-170 113-112-113 112Z"/></svg></a><a class="navi_link button" href="/about.html"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#434343"><path d="M194-80v-395h80v315h280v-193l105-105q29-29 45-65t16-77q0-40-16.5-76T659-741l-25-26-127 127H347l-43 43-57-56 67-67h160l160-160 82 82q40 40 62 90.5T800-600q0 57-22 107.5T716-402l-82 82v240H194Zm197-187L183-475q-11-11-17-26t-6-31q0-16 6-30.5t17-25.5l84-85 124 123q28 28 43.5 64.5T450-409q0 40-15 76.5T391-267Z"/></svg></a></div>
      </div>
      <div class="contents">
        <div class="top_gap_space"></div>
        <div class="header"><a class="navi_link button" href="/home.html"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" version="1.1" width="21" height="20.999996185302734" viewBox="0 0 21 20.999996185302734"><defs><clipPath id="master_svg0_9_0235"><rect x="0" y="0" width="21" height="20.999996185302734" rx="0"/></clipPath></defs><g clip-path="url(#master_svg0_9_0235)"><g><path d="M9.9628,1.059317C10.27877,0.8135611,10.7212,0.8135611,11.03716,1.059317C11.03716,1.059317,18.9122,7.18432,18.9122,7.18432C19.1253,7.35009,19.25,7.60498,19.25,7.875C19.25,7.875,19.25,17.5,19.25,17.5C19.25,18.1962,18.9734,18.8639,18.4811,19.3561C17.9889,19.8484,17.321199999999997,20.125,16.625,20.125C16.625,20.125,4.375,20.125,4.375,20.125C3.67881,20.125,3.01113,19.8484,2.518845,19.3561C2.026561,18.8639,1.75,18.1962,1.75,17.5C1.75,17.5,1.75,7.875,1.75,7.875C1.75,7.60498,1.874664,7.35009,2.087802,7.18432C2.087802,7.18432,9.9628,1.059317,9.9628,1.059317C9.9628,1.059317,9.9628,1.059317,9.9628,1.059317ZM8.75,18.375C8.75,18.375,12.25,18.375,12.25,18.375C12.25,18.375,12.25,11.375,12.25,11.375C12.25,11.375,8.75,11.375,8.75,11.375C8.75,11.375,8.75,18.375,8.75,18.375C8.75,18.375,8.75,18.375,8.75,18.375ZM14,18.375C14,18.375,14,10.5,14,10.5C14,10.01674,13.6083,9.625,13.125,9.625C13.125,9.625,7.875,9.625,7.875,9.625C7.39176,9.625,7,10.01674,7,10.5C7,10.5,7,18.375,7,18.375C7,18.375,4.375,18.375,4.375,18.375C4.14293,18.375,3.92038,18.2828,3.75628,18.1187C3.59219,17.9547,3.5,17.732,3.5,17.5C3.5,17.5,3.5,8.30295,3.5,8.30295C3.5,8.30295,10.5,2.8585000000000003,10.5,2.8585000000000003C10.5,2.8585000000000003,17.5,8.30295,17.5,8.30295C17.5,8.30295,17.5,17.5,17.5,17.5C17.5,17.732,17.4078,17.9547,17.2437,18.1187C17.0796,18.2828,16.857,18.375,16.625,18.375C16.625,18.375,14,18.375,14,18.375C14,18.375,14,18.375,14,18.375Z" fill-rule="evenodd" fill="#373737" fill-opacity="1"/></g></g></svg></a><a class="navi_link button" href="/blogs.html"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#434343"><path d="M520-600v-240h320v240H520ZM120-440v-400h320v400H120Zm400 320v-400h320v400H520Zm-400 0v-240h320v240H120Zm80-400h160v-240H200v240Zm400 320h160v-240H600v240Zm0-480h160v-80H600v80ZM200-200h160v-80H200v80Zm160-320Zm240-160Zm0 240ZM360-280Z"/></svg></a><a class="navi_link button" href="/portfolio.html"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#434343"><path d="M619-108q-11 11-25.5 17T563-85q-16 0-31-6t-26-17l-56-56q-11-11-16.5-24.5T427-216q-1-14 3.5-28t13.5-26l6-8-326-466 156-156 509 509q11 11 17 25.5t6 30.5q0 16-6 31t-17 26L619-108ZM507-335l113-112-340-340-52 52 279 400Zm56 170 169-169-56-57-170 170 57 56Zm-56-170 113-112-113 112Z"/></svg></a><a class="navi_link button" href="/about.html"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#434343"><path d="M194-80v-395h80v315h280v-193l105-105q29-29 45-65t16-77q0-40-16.5-76T659-741l-25-26-127 127H347l-43 43-57-56 67-67h160l160-160 82 82q40 40 62 90.5T800-600q0 57-22 107.5T716-402l-82 82v240H194Zm197-187L183-475q-11-11-17-26t-6-31q0-16 6-30.5t17-25.5l84-85 124 123q28 28 43.5 64.5T450-409q0 40-15 76.5T391-267Z"/></svg></a></div>
        <div class="page_description">
          <h1 class="title">⌨️ 优化键盘布局，改善生活福祉</h1>
          <hr>
          <div class="sub_info">
            <p class="date">2025-12-22</p>
            <div class="type_tags">
              <p class="tag">Keyboard</p>
              <p class="type">Dev</p>
            </div>
          </div>
        </div>
        <div class="page_content">
          <h1 id="heading1_0" index-text="I">
            <t class="">前言</t>
          </h1>
          <p>
            <t class="">我过去一直在使用一个基于 QWERTY 的简单改造的键盘布局，核心映射是将 Cmd/Ctrl 键与 Capslock 互换，然后将 Cmd+U/I/O 映射为 &amp;*_ 这样的写 rust 和 c++ 常用的符号。但是经过长期使用，发现这个方案对于左手小拇指的工作压力很大。</t>
          </p>
          <ul>
            <li>
              <t class="">无论 Shift 和 Cmd 都被交给了小拇指</t>
            </li>
            <li>
              <t class="">QWERTY 的键盘布局还将很多编程常用的符号交给了 shfit 与其它按键的组合键（如&lt;&gt;+:?）</t>
            </li>
            <li>
              <t class="">某些大写驼峰式的命名规范中要频繁按 shift（Unreal 的命名规范是小拇指地狱啊）</t>
            </li>
          </ul>
          <p>
            <t class="">所以我决心重新设计自己的键盘布局。</t>
          </p>
          <h1 id="heading1_1" index-text="II">
            <t class="">新的键盘布局</t>
          </h1>
          <p>
            <t class="">地球的程式师们在过去已经开发出了多种优化编程体验的键盘布局，我参考了他们的设计。两个比较经典的设计范式是“层级”和 “Home Row Mod”。前者的思想是允许键盘有不同的虚拟输入层，后者则是一种修饰键的方式。我的新布局使用了上述两种范式，并仍基于 QWERTY。在设计时，我保留了许多 QWERTY 的特征，使得不会让自己忘记没有映射的别人的键盘，同时也让其它人能够使用我的键盘。</t>
          </p>
          <p>
            <t class="">还需要说明一下的是，这次键盘布局改造是基于软件的而非硬件的。软件名称为 </t>
<a class="link" href="https://github.com/jtroo/kanata/tree/main?tab=readme-ov-file">Kanata</a>
            <t class="">，这是一个同时支持 MacOS、Windows、GNU/Linux 的开源的按键映射工具。我使用的物理键盘仍然是一个 68 键 QWERTY 布局的普通键盘。</t>
          </p>
          <h2 id="heading2_0">
            <t class="">布局设计</t>
          </h2>
          <p>
            <t class="">Kanata 支持层级设计，在 Kanata 中，键盘默认状态是名为 base 的层。因此我也用 Base 来称呼键盘的初始层或叫默认层。</t>
          </p>
          <div class="image_wrapper"><img src="/post/2d17e342-f5b5-8016-9a57-d8fdca60f744/img_2d17e342-f5b5-80c1-b9fc-d42454c17f56.png">
            <div class="caption"></div>
          </div>
          <p>
            <t class="">我的 Base 层是其它层的入口，它采用了 Home Row Mods 范式，其思想是将手自然放置时的 8 个按键按键，在按住并输入其它键时变为修饰键，而点按时的输出仍然是原来的字母。具体映射如图所示。此外我的 Base 层还对两个符号位做了一点改变，我将 </t>
            <t class="code">;</t>
            <t class=""> 改为了</t>
            <t class="code">回车</t>
            <t class="">、</t>
            <t class="code">”</t>
            <t class=""> 改为了 </t>
            <t class="code">:</t>
            <t class="">， 不用担心因此这些符号丢失，我在符号层中给他们留了位置。将回车改近的好处不必多说，</t>
            <t class="code">:</t>
            <t class=""> 作为 Vim 中常用的按键，使用频率要远高于单引号，所以做了这样的设计。</t>
          </p>
          <blockquote>
            <t class="">在 kanata 和其它按键映射软件中，按键可以采用名为 </t>
            <t class="code">tap-hold-release</t>
            <t class=""> 的模式，其行为是当按键被按下并段时间内被松开时，发送键 </t>
            <t class="code">&lt;A&gt;</t>
            <t class="">；当按键被按住（没有松开）并且用户在这个过程中按下并松开了其它键，则发送键 </t>
            <t class="code">&lt;B&gt;</t>
            <t class="">。A 和 B 可以自由设置。</t>
          </blockquote>
          <h3 id="heading3_0">
            <t class="">Command 层：Cmd 修饰和 Vim 风格移动</t>
          </h3>
          <p>
            <t class="">我的设计中，Command 层是在按下 Command（MacOS 上）或 Ctrl（Windows 上）时进入的层。让我可以使用 Vim 风格的光标移动方式。其行为可以直观地理解成：</t>
            <t class="code">Cmd+H</t>
            <t class=""> → 左，</t>
            <t class="code">Cmd+J</t>
            <t class=""> → 下……此外，图中没有写出的部分就是 </t>
            <t class="code">Cmd+按键</t>
            <t class=""> 的行为。</t>
          </p>
          <div class="image_wrapper"><img src="/post/2d17e342-f5b5-8016-9a57-d8fdca60f744/img_2d17e342-f5b5-80c5-a954-c3422dc20257.png">
            <div class="caption"></div>
          </div>
          <p>
            <t class="">由于 Base 层将 F 和 J 映射到了 Cmd，所以可以使用 F+H/J/K/L 的方式来输出方向键，J+C/V 进行复制粘贴等等便利的事情。</t>
          </p>
          <h3 id="heading3_1">
            <t class="">Altaction 层：快速光标操作与退格</t>
          </h3>
          <p>
            <t class="">Altaction 层与 Command 层类似，也是允许我在 vim 系软件外使用 vim 风格的方式操作光标。不过其光标移动以单词位单位。映射到的目标，在 Windows 上就是 Ctrl+方向键，在 MacOS 上就是 Option+方向键。我暂称其为 Altaction（因为 Option 在 kanata 的物理按键名称还是 Alt）。此外，Altaction 层的空格键被映射成了退格键，删除单个字符就不用将手移到键盘右上方再移回来了。</t>
          </p>
          <div class="image_wrapper"><img src="/post/2d17e342-f5b5-8016-9a57-d8fdca60f744/img_2d17e342-f5b5-809e-ba19-c86bbd9335fb.png">
            <div class="caption"></div>
          </div>
          <p>
            <t class="">所以我可以使用 S+H/J/K/L 来快速移动光标，S/L+空格键来输出退格键。</t>
          </p>
          <h3 id="heading3_2">
            <t class="">符号层：便于输入符号而不移动手掌</t>
          </h3>
          <p>
            <t class="">符号层如其名，包含了各种符号。按住空格触发符号层。符号层的布局设计经过自身的使用经历的检验，在刚设计的两周间经过了反复地修改。最终，我定下了如图所示的现在这个设计。如果你好奇为什么这样安排，可以跟随下面的文字阅读图片。</t>
          </p>
          <div class="image_wrapper"><img src="/post/2d17e342-f5b5-8016-9a57-d8fdca60f744/img_2d17e342-f5b5-8001-ae90-e52cecf39848.png">
            <div class="caption"></div>
          </div>
          <ul>
            <li>
              <t class="">第二行前半部分来自原来数字键位 Shift 下输出的符号，它们本身使用频率不高不低，这样设计可以降低记忆成本，而 </t>
              <t class="code">U/I/O</t>
              <t class=""> 是右手的黄金位置，我给它们分配了 C++ 和 Rust 很常用的三个符号 </t>
              <t class="code">&amp; * _</t>
              <t class="">。</t>
            </li>
            <li>
              <t class="">第三行是整个键盘的黄金位置，我在里面放了编程中十分常用的符号：</t>
              <t class="code">- &gt;</t>
              <t class=""> 的组合在一些语言中经常见到，因此挨在一起；</t>
              <t class="code">{ [</t>
              <t class="">  较常用，但在大部分时候会被 IDE 补全另一半，所以只将前半部分放在了这一行；</t>
              <t class="code">, . /</t>
              <t class=""> 是在终端经常输入。至于为何 </t>
              <t class="code">( )</t>
              <t class=""> 被放在了第三行，是因为我发现我的右手按 N 和 M 要比 H 要更舒适。而 </t>
              <t class="code">( )</t>
              <t class=""> 在各类编程语言中出现的频率都很高，因此将 N 和 M 的黄金位置留给了括号。</t>
            </li>
            <li>
              <t class="">其它位置中，</t>
              <t class="code">; “</t>
              <t class=""> 被 Base 层占据，所以放到了符号层。同时 </t>
              <t class="code">“</t>
              <t class=""> 在我常用的编程语言中的使用频率更高，所以把它放在了更好按的位置，</t>
              <t class="code">‘</t>
              <t class=""> 被放到了其下面。</t>
            </li>
          </ul>
          <h3 id="heading3_3">
            <t class="">大写状态：便于输入 UPPER_SNAKE_CASE</t>
          </h3>
          <p>
            <t class="">大写状态是为了输入 UPPER_SNAKE_CASE 的时候设计的。我将 Shift 的点按设计为进入大写状态，在大写状态下我输出的任何字母字符都是大写，大部分符号字符也是带有 Shift 修饰键的（主要是 - 要变为 _），想要退出大写状态，只要按下空格或点按 Shift。</t>
          </p>
          <h3 id="heading3_4">
            <t class="">游戏层：没有映射</t>
          </h3>
          <p>
            <t class="">这就是一个没有任何映射的遵循原本物理按键的层。当我玩游戏时或别人使用我的电脑时使用。按 Shift+ESC 可以在游戏层和 Base 层切换。</t>
          </p>
          <h1 id="heading1_2" index-text="III">
            <t class="">使用 Kanata</t>
          </h1>
          <p>
            <t class="">我十分推荐阅读官方文档 Kanata Configuration Guide 来了解 Kanata 的使用方式。它写得清楚和全面。</t>
          </p>
          <div class="caption_block"><a class="bookmark button" href="https://jtroo.github.io/config.html">
              <div class="title">Kanata Configuration Guide</div>
              <div class="url">https://jtroo.github.io/config.html</div>
            </a>
            <div class="caption"></div>
          </div>
          <p>
            <t class="">也欢迎查看我的配置仓库作为参考：</t>
          </p>
          <p><a class="link" href="https://github.com/gloridifice/my-kanata-config">https://github.com/gloridifice/my-kanata-config</a></p>
        </div>
      </div>
      <div class="sidebar_wrapper_right sidebar_wrapper">
        <div class="catalogue">
          <ul>
            <li class="h1"><a href="#heading1_0">
                <t class="">前言</t>
              </a></li>
            <li class="h1"><a href="#heading1_1">
                <t class="">新的键盘布局</t>
              </a></li>
            <li class="h2"><a href="#heading2_0">
                <t class="">布局设计</t>
              </a></li>
            <li class="h3"><a href="#heading3_0">
                <t class="">Command 层：Cmd 修饰和 Vim 风格移动</t>
              </a></li>
            <li class="h3"><a href="#heading3_1">
                <t class="">Altaction 层：快速光标操作与退格</t>
              </a></li>
            <li class="h3"><a href="#heading3_2">
                <t class="">符号层：便于输入符号而不移动手掌</t>
              </a></li>
            <li class="h3"><a href="#heading3_3">
                <t class="">大写状态：便于输入 UPPER_SNAKE_CASE</t>
              </a></li>
            <li class="h3"><a href="#heading3_4">
                <t class="">游戏层：没有映射</t>
              </a></li>
            <li class="h1"><a href="#heading1_2">
                <t class="">使用 Kanata</t>
              </a></li>
          </ul>
        </div>
      </div>
    </div>
  </body>
</html>
